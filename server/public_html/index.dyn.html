<?include header.priv.html ?>
    <h1>Hello, <?lu write(query.name or "Nomad") ?></h1>
    <h2>Welcome to 80's HTTP server!</h2>
    <img src="/assets/srgen.jpg">

    <p><a href="/posts/">Read posts</a></p>

    <p>w3.org response:</p>
    <pre><?lua
        header("X-Server-Time", os.time())
        if query.w3 then
            write(await(HTTP:GET("www.w3.org", "/", "text/html")))
            done()
        else
            write("w3 was not requested")
            done()
        end
    ?></pre>

    <p>Posts: <?lua
        local posts = await(SQL:select("SELECT COUNT(*) AS cnt FROM posts"))
        write("Posts: " .. posts[1].cnt)
        done()
    ?></p>
<?include footer.priv.html ?>